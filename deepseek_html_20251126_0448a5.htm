<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºèƒ½é—ªå¡å­¦ä¹ ç³»ç»Ÿ - ç¬¬å››è¯¾å•è¯</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            width: 100%;
            max-width: 800px;
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.2rem;
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 1.1rem;
        }
        
        .stats-container {
            display: flex;
            justify-content: space-between;
            width: 100%;
            max-width: 800px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 15px 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
            flex: 1;
            margin: 0 10px;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #3498db;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-top: 5px;
        }
        
        .group-selector {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            width: 100%;
            max-width: 800px;
        }
        
        .group-btn {
            padding: 10px 20px;
            margin: 0 10px;
            border: none;
            border-radius: 50px;
            background: #3498db;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .group-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }
        
        .group-btn.active {
            background: #2c3e50;
        }
        
        .group-btn.locked {
            background: #95a5a6;
            cursor: not-allowed;
        }
        
        .flashcard-container {
            width: 100%;
            max-width: 500px;
            height: 300px;
            perspective: 1000px;
            margin-bottom: 30px;
        }
        
        .flashcard {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
        }
        
        .flashcard.flipped {
            transform: rotateY(180deg);
        }
        
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .card-front {
            background: white;
            color: #2c3e50;
        }
        
        .card-back {
            background: #3498db;
            color: white;
            transform: rotateY(180deg);
            justify-content: space-between;
        }
        
        .word {
            font-size: 2.5rem;
            font-weight: bold;
            text-align: center;
        }
        
        .hint {
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-top: 15px;
        }
        
        .repeat-count {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.8rem;
        }
        
        .translation {
            font-size: 1.8rem;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .memory-aid {
            font-size: 1rem;
            text-align: center;
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 10px;
            width: 100%;
        }
        
        .buttons-container {
            display: flex;
            justify-content: space-between;
            width: 100%;
            max-width: 500px;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            flex: 1;
            margin: 0 10px;
        }
        
        .btn-know {
            background: #2ecc71;
            color: white;
        }
        
        .btn-dont-know {
            background: #e74c3c;
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .progress-container {
            width: 100%;
            max-width: 500px;
            margin-top: 20px;
        }
        
        .progress-bar {
            height: 10px;
            background: #ecf0f1;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: #3498db;
            border-radius: 5px;
            transition: width 0.5s;
        }
        
        .progress-text {
            text-align: center;
            margin-top: 10px;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        .tts-btn {
            background: none;
            border: none;
            color: #3498db;
            font-size: 1.5rem;
            cursor: pointer;
            margin-top: 15px;
            transition: transform 0.2s;
        }
        
        .tts-btn:hover {
            transform: scale(1.1);
        }
        
        .timer {
            font-size: 1.2rem;
            color: #2c3e50;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .completion-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .modal-title {
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.8rem;
        }
        
        .time-stats {
            margin-bottom: 20px;
        }
        
        .time-stat {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .word-list {
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
        }
        
        .word-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid #ecf0f1;
        }
        
        .close-btn {
            background: #3498db;
            color: white;
            border: none;
            border-radius: 50px;
            padding: 10px 20px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            width: 100%;
            transition: background 0.3s;
        }
        
        .close-btn:hover {
            background: #2980b9;
        }
        
        @media (max-width: 600px) {
            .stats-container {
                flex-direction: column;
            }
            
            .stat-card {
                margin: 5px 0;
            }
            
            .flashcard-container {
                height: 250px;
            }
            
            .word {
                font-size: 2rem;
            }
            
            .translation {
                font-size: 1.5rem;
            }
            
            .group-selector {
                flex-wrap: wrap;
            }
            
            .group-btn {
                margin: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>æ™ºèƒ½é—ªå¡å­¦ä¹ ç³»ç»Ÿ - ç¬¬å››è¯¾å•è¯</h1>
        <p class="subtitle">åˆ†ç»„å­¦ä¹ ï¼Œå¾ªåºæ¸è¿›ï¼Œå·©å›ºè®°å¿†</p>
    </div>
    
    <div class="stats-container">
        <div class="stat-card">
            <div class="stat-value" id="total-words">0</div>
            <div class="stat-label">æ€»å•è¯æ•°</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="mastered-words">0</div>
            <div class="stat-label">å·²æŒæ¡</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="remaining-words">0</div>
            <div class="stat-label">å¾…å­¦ä¹ </div>
        </div>
    </div>
    
    <div class="group-selector">
        <button class="group-btn active" id="group1-btn">ç¬¬ä¸€ç»„ (1-20)</button>
        <button class="group-btn locked" id="group2-btn">ç¬¬äºŒç»„ (21-40)</button>
        <button class="group-btn locked" id="group3-btn">ç¬¬ä¸‰ç»„ (41-60)</button>
    </div>
    
    <div class="timer" id="timer">ç”¨æ—¶: 00:00</div>
    
    <div class="flashcard-container">
        <div class="flashcard" id="flashcard">
            <div class="card-face card-front">
                <div class="word" id="word-front">date</div>
                <p class="hint">ç‚¹å‡»å¡ç‰‡æŸ¥çœ‹é‡Šä¹‰</p>
                <button class="tts-btn" id="tts-front">ğŸ”Š</button>
            </div>
            <div class="card-face card-back">
                <div class="repeat-count" id="repeat-count">0</div>
                <div class="word" id="word-back">date</div>
                <div class="translation" id="translation">n.æ—¥æœŸ;æ—¥å­</div>
                <div class="memory-aid" id="memory-aid">è®°å¿†æç¤º: ä¸day(æ—¥å­)ç›¸å…³</div>
                <button class="tts-btn" id="tts-back">ğŸ”Š</button>
            </div>
        </div>
    </div>
    
    <div class="buttons-container">
        <button class="btn btn-dont-know" id="btn-dont-know">ä¸ä¼š</button>
        <button class="btn btn-know" id="btn-know">ä¼šäº†</button>
    </div>
    
    <div class="progress-container">
        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>
        <div class="progress-text" id="progress-text">0/0 (0%)</div>
    </div>

    <script>
        // å•è¯æ•°æ® - ç¬¬å››è¯¾å•è¯
        const wordData = [
            {english: "date", chinese: "n.æ—¥æœŸ;æ—¥å­", status: "unmastered", repeatCount: 0, memoryAid: "è®°å¿†æç¤º: ä¸day(æ—¥å­)ç›¸å…³"},
            {english: "sports ground", chinese: "è¿åŠ¨åœº;æ“åœº", status: "unmastered", repeatCount: 0, memoryAid: "sports(è¿åŠ¨) + ground(åœºåœ°) â†’ è¿åŠ¨åœº"},
            {english: "gym", chinese: "n.(=gymnasium)å¥èº«æˆ¿;ä½“è‚²é¦†", status: "unmastered", repeatCount: 0, memoryAid: "gymnasiumçš„ç¼©å†™å½¢å¼"},
            {english: "team", chinese: "n.(æ¸¸æˆæˆ–è¿åŠ¨çš„)é˜Ÿ", status: "unmastered", repeatCount: 0, memoryAid: "è”æƒ³: ä¸€ä¸ªå›¢é˜Ÿä¸€èµ·å·¥ä½œ"},
            {english: "high", chinese: "adj.é«˜çš„", status: "unmastered", repeatCount: 0, memoryAid: "åä¹‰è¯: low(ä½çš„)"},
            {english: "rope", chinese: "n.ç»³", status: "unmastered", repeatCount: 0, memoryAid: "è”æƒ³: è·³ç»³ç”¨çš„ç»³å­"},
            {english: "kick", chinese: "vè¸¢", status: "unmastered", repeatCount: 0, memoryAid: "å‘éŸ³ç±»ä¼¼'è¸¢å…‹'ï¼Œå¸®åŠ©è®°å¿†"},
            {english: "rock", chinese: "n.å²©çŸ³", status: "unmastered", repeatCount: 0, memoryAid: "è”æƒ³: æ‘‡æ»šä¹(rock music)"},
            {english: "climb", chinese: "v æ”€ç™»;çˆ¬", status: "unmastered", repeatCount: 0, memoryAid: "è”æƒ³: çˆ¬å±±(climb mountains)"},
            {english: "rock climbing", chinese: "æ”€å²©", status: "unmastered", repeatCount: 0, memoryAid: "rock(å²©çŸ³) + climbing(æ”€ç™») â†’ æ”€å²©"},
            {english: "kung fu", chinese: "n.åŠŸå¤«(ä¸­å›½æ‹³æœ¯)", status: "unmastered", repeatCount: 0, memoryAid: "ä¸­æ–‡'åŠŸå¤«'çš„éŸ³è¯‘"},
            {english: "frisbee", chinese: "n.å¼—é‡Œæ–¯æ¯”é£ç›˜æŠ•æ·æ¸¸æˆç”¨çš„é£ç¢Ÿ", status: "unmastered", repeatCount: 0, memoryAid: "å“ç‰Œåç§°Frisbeeçš„éŸ³è¯‘"},
            {english: "active", chinese: "adj.æ´»è·ƒçš„;å……æ»¡æ´»åŠ›çš„;ç§¯æçš„", status: "unmastered", repeatCount: 0, memoryAid: "è¯æ ¹act(è¡ŒåŠ¨) + ive(å½¢å®¹è¯åç¼€) â†’ æ´»è·ƒçš„"},
            {english: "part", chinese: "n.éƒ¨åˆ†", status: "unmastered", repeatCount: 0, memoryAid: "è”æƒ³: participate(å‚ä¸)çš„ä¸€éƒ¨åˆ†"},
            {english: "take part in", chinese: "å‚åŠ ", status: "unmastered", repeatCount: 0, memoryAid: "take(æ‹¿) + part(éƒ¨åˆ†) + in(åœ¨...ä¸­) â†’ å‚åŠ "},
            {english: "baseball", chinese: "n.æ£’çƒè¿åŠ¨", status: "unmastered", repeatCount: 0, memoryAid: "base(å’) + ball(çƒ) â†’ æ£’çƒ"},
            {english: "volleyball", chinese: "n. æ’çƒ;æ’çƒè¿åŠ¨", status: "unmastered", repeatCount: 0, memoryAid: "volley(æˆªå‡») + ball(çƒ) â†’ æ’çƒ"},
            {english: "badminton", chinese: "n.ç¾½æ¯›çƒè¿åŠ¨", status: "unmastered", repeatCount: 0, memoryAid: "éŸ³è¯‘'å·´å¾·æ˜é¡¿'ï¼Œæºè‡ªè‹±å›½åœ°å"},
            {english: "tennis", chinese: "n.ç½‘çƒ", status: "unmastered", repeatCount: 0, memoryAid: "å‘éŸ³ç±»ä¼¼'å¦å°¼æ–¯'"},
            {english: "pull", chinese: "v.æ‹‰ï¼›æ‹”å‡º", status: "unmastered", repeatCount: 0, memoryAid: "åä¹‰è¯: push(æ¨)"},
            {english: "safety", chinese: "n.å®‰å…¨ï¼›å¹³å®‰", status: "unmastered", repeatCount: 0, memoryAid: "safe(å®‰å…¨çš„) + ty(åè¯åç¼€) â†’ å®‰å…¨"},
            {english: "ankle", chinese: "n.è„šè¸", status: "unmastered", repeatCount: 0, memoryAid: "å‘éŸ³ç±»ä¼¼'å®‰æ‰£'ï¼Œè„šè¸åƒæ‰£å­ä¸€æ ·è¿æ¥è„šå’Œè…¿"},
            {english: "match", chinese: "n.æ¯”èµ›", status: "unmastered", repeatCount: 0, memoryAid: "å¤šä¹‰è¯: æ¯”èµ›;ç«æŸ´;åŒ¹é…"},
            {english: "gear", chinese: "n.(æŸç§æ´»åŠ¨)è®¾å¤‡ï¼Œç”¨å…·ï¼Œè¡£æœ", status: "unmastered", repeatCount: 0, memoryAid: "å‘éŸ³ç±»ä¼¼'å‰å°”'ï¼Œè¿åŠ¨è£…å¤‡"},
            {english: "example", chinese: "n.ä¾‹å­ï¼Œå®ä¾‹", status: "unmastered", repeatCount: 0, memoryAid: "ex(å‡º) + ample(æ‹¿) â†’ æ‹¿å‡ºæ¥çš„ä¸œè¥¿ â†’ ä¾‹å­"},
            {english: "for example", chinese: "ä¾‹å¦‚", status: "unmastered", repeatCount: 0, memoryAid: "for(ä¸ºäº†) + example(ä¾‹å­) â†’ ä¾‹å¦‚"},
            {english: "warm up", chinese: "ï¼ˆä½“è‚²æ´»åŠ¨ç­‰å‰çš„ï¼‰é€‚åº”æ€§æ´»åŠ¨ï¼Œå‡†å¤‡æ´»åŠ¨ï¼›çƒ­èº«ç»ƒä¹ ", status: "unmastered", repeatCount: 0, memoryAid: "warm(æ¸©æš–) + up(å‘ä¸Š) â†’ çƒ­èº«"},
            {english: "warm-up", chinese: "n.çƒ­èº«ï¼Œå‡†å¤‡æ´»åŠ¨", status: "unmastered", repeatCount: 0, memoryAid: "warm upçš„åè¯å½¢å¼"},
            {english: "watch out", chinese: "å°å¿ƒï¼Œç•™ç¥ï¼›æ³¨æ„", status: "unmastered", repeatCount: 0, memoryAid: "watch(çœ‹) + out(å¤–é¢) â†’ å°å¿ƒå¤–é¢ â†’ æ³¨æ„"},
            {english: "matter", chinese: "n.é—®é¢˜ï¼›äº‹æƒ…", status: "unmastered", repeatCount: 0, memoryAid: "è”æƒ³: What's the matter?(æ€ä¹ˆäº†?)"},
            {english: "what's the matter?", chinese: "æ€ä¹ˆäº†ï¼Ÿ", status: "unmastered", repeatCount: 0, memoryAid: "what(ä»€ä¹ˆ) + matter(é—®é¢˜) â†’ æ€ä¹ˆäº†?"},
            {english: "happen", chinese: "v.å‘ç”Ÿ", status: "unmastered", repeatCount: 0, memoryAid: "è”æƒ³: happy(å¿«ä¹) â†’ å‘ç”Ÿçš„äº‹æƒ…"},
            {english: "just", chinese: "adv.ä»…ä»…æ˜¯ï¼Œåªæ˜¯", status: "unmastered", repeatCount: 0, memoryAid: "å¤šä¹‰è¯: ä»…ä»…;åˆšæ‰;æ­£å¥½"},
            {english: "fall", chinese: "v.çªç„¶å€’ä¸‹ï¼Œè·Œå€’", status: "unmastered", repeatCount: 0, memoryAid: "å¤šä¹‰è¯: è·Œå€’;ç§‹å¤©"},
            {english: "guess", chinese: "v.çŒœæµ‹ï¼›ä¼°è®¡", status: "unmastered", repeatCount: 0, memoryAid: "å‘éŸ³ç±»ä¼¼'ç›–æ–¯'ï¼ŒçŒœæµ‹æ¸¸æˆ"},
            {english: "cut", chinese: "n.ä¼¤å£ï¼›v.åˆ‡ï¼Œå‰²", status: "unmastered", repeatCount: 0, memoryAid: "å¤šä¹‰è¯: åˆ‡;ä¼¤å£;å‰Šå‡"},
            {english: "knee", chinese: "n.è†ç›–", status: "unmastered", repeatCount: 0, memoryAid: "å‘éŸ³ç±»ä¼¼'å°¼'ï¼Œè†ç›–å¼¯æ›²å¤„"},
            {english: "how come?", chinese: "æ€ä¹ˆå›äº‹ï¼Ÿæ€ä¹ˆå‘ç”Ÿçš„ï¼Ÿ", status: "unmastered", repeatCount: 0, memoryAid: "how(å¦‚ä½•) + come(æ¥) â†’ æ€ä¹ˆå‘ç”Ÿçš„?"},
            {english: "seem", chinese: "v.å¥½åƒï¼›ä¼¼ä¹ï¼›çœ‹æ¥", status: "unmastered", repeatCount: 0, memoryAid: "å‘éŸ³ç±»ä¼¼'è¥¿å§†'ï¼Œçœ‹èµ·æ¥åƒ"},
            {english: "problem", chinese: "n.æ£˜æ‰‹çš„é—®é¢˜ï¼›éš¾é¢˜ï¼›å›°éš¾", status: "unmastered", repeatCount: 0, memoryAid: "pro(å‘å‰) + blem(æŠ•æ·) â†’ æŠ•å‘å‰é¢çš„ä¸œè¥¿ â†’ é—®é¢˜"},
            {english: "score", chinese: "v.å¾—åˆ†ï¼›è¿›çƒ", status: "unmastered", repeatCount: 0, memoryAid: "å¤šä¹‰è¯: å¾—åˆ†;ä¹è°±;äºŒå"},
            {english: "goal", chinese: "n.ç›®æ ‡ï¼›è¿›çƒå¾—å¾—åˆ†ï¼›çƒé—¨", status: "unmastered", repeatCount: 0, memoryAid: "å¤šä¹‰è¯: ç›®æ ‡;çƒé—¨;è¿›çƒ"},
            {english: "goalkeeper", chinese: "n.å®ˆé—¨å‘˜", status: "unmastered", repeatCount: 0, memoryAid: "goal(çƒé—¨) + keeper(çœ‹å®ˆè€…) â†’ å®ˆé—¨å‘˜"},
            {english: "hold", chinese: "v.ä½¿â€¦â€¦ä¿æŒåœ¨æŸä½ç½®ï¼›æ‹¿ç€ï¼›æŠ“ä½", status: "unmastered", repeatCount: 0, memoryAid: "å¤šä¹‰è¯: æ‹¿ç€;ä¸¾è¡Œ;ä¿æŒ"},
            {english: "throw", chinese: "v.æŠ•æ·ï¼›æŠ›", status: "unmastered", repeatCount: 0, memoryAid: "å‘éŸ³ç±»ä¼¼'æ–¯æŸ”'ï¼ŒæŠ•æ·åŠ¨ä½œ"},
            {english: "point", chinese: "n.å¾—åˆ†ï¼›ç»©ç‚¹", status: "unmastered", repeatCount: 0, memoryAid: "å¤šä¹‰è¯: ç‚¹;å¾—åˆ†;æŒ‡å‘"},
            {english: "control", chinese: "v.&n.æ§åˆ¶ï¼›ç®¡ç†", status: "unmastered", repeatCount: 0, memoryAid: "contra(åå¯¹) + rol(æ»šåŠ¨) â†’ æ§åˆ¶æ»šåŠ¨ â†’ æ§åˆ¶"},
            {english: "mind", chinese: "n.å¤´è„‘ï¼›v.å½“å¿ƒï¼›æ³¨æ„", status: "unmastered", repeatCount: 0, memoryAid: "å¤šä¹‰è¯: å¤´è„‘;ä»‹æ„;æ³¨æ„"},
            {english: "powerful", chinese: "adj.å¼ºæœ‰åŠ›çš„", status: "unmastered", repeatCount: 0, memoryAid: "power(åŠ›é‡) + ful(å½¢å®¹è¯åç¼€) â†’ å¼ºæœ‰åŠ›çš„"},
            {english: "style", chinese: "n.é£æ ¼ï¼›æ ·å¼", status: "unmastered", repeatCount: 0, memoryAid: "å‘éŸ³ç±»ä¼¼'æ–¯ä»£å°”'ï¼Œæ—¶å°šé£æ ¼"},
            {english: "moment", chinese: "n.ç‰‡åˆ»ï¼›ç¬é—´", status: "unmastered", repeatCount: 0, memoryAid: "è”æƒ³: é‡è¦æ—¶åˆ»(important moment)"},
            {english: "report", chinese: "v.&n.æ±‡æŠ¥ï¼›æŠ¥é“", status: "unmastered", repeatCount: 0, memoryAid: "re(å›) + port(æºå¸¦) â†’ å¸¦å›æ¥ â†’ æŠ¥å‘Š"},
            {english: "newspaper", chinese: "n.æŠ¥çº¸", status: "unmastered", repeatCount: 0, memoryAid: "news(æ–°é—») + paper(çº¸) â†’ æŠ¥çº¸"},
            {english: "court", chinese: "n.çƒåœº", status: "unmastered", repeatCount: 0, memoryAid: "å¤šä¹‰è¯: çƒåœº;æ³•åº­;åº­é™¢"},
            {english: "against", chinese: "prep.ä¸â€¦â€¦å¯¹é˜µï¼›åå¯¹ï¼Œç›¸å", status: "unmastered", repeatCount: 0, memoryAid: "again(å†æ¬¡) + st(ç«™ç«‹) â†’ å¯¹ç«‹ç«™ç€ â†’ åå¯¹"},
            {english: "shoot", chinese: "v.å°„é—¨ï¼›æŠ•ç¯®", status: "unmastered", repeatCount: 0, memoryAid: "å¤šä¹‰è¯: å°„å‡»;æŠ•ç¯®;æ‹æ‘„"},
            {english: "basket", chinese: "n.ç¯®çƒè¿åŠ¨çš„ç¯®ç­", status: "unmastered", repeatCount: 0, memoryAid: "basket(ç¯®å­) + ball(çƒ) â†’ ç¯®çƒ"},
            {english: "tie", chinese: "v.å¾—åˆ†ç›¸åŒ", status: "unmastered", repeatCount: 0, memoryAid: "å¤šä¹‰è¯: å¹³å±€;é¢†å¸¦;ç³»"},
            {english: "bravo", chinese: "å–å½©å£°ï¼šå¥½å“‡", status: "unmastered", repeatCount: 0, memoryAid: "æ„å¤§åˆ©è¯­ï¼Œè¡¨ç¤ºå–å½©"},
            {english: "track", chinese: "n.è·‘é“", status: "unmastered", repeatCount: 0, memoryAid: "å¤šä¹‰è¯: è·‘é“;è½¨é“;è¿½è¸ª"}
        ];

        // DOMå…ƒç´ 
        const flashcard = document.getElementById('flashcard');
        const wordFront = document.getElementById('word-front');
        const wordBack = document.getElementById('word-back');
        const translation = document.getElementById('translation');
        const memoryAid = document.getElementById('memory-aid');
        const repeatCount = document.getElementById('repeat-count');
        const btnKnow = document.getElementById('btn-know');
        const btnDontKnow = document.getElementById('btn-dont-know');
        const ttsFront = document.getElementById('tts-front');
        const ttsBack = document.getElementById('tts-back');
        const totalWords = document.getElementById('total-words');
        const masteredWords = document.getElementById('mastered-words');
        const remainingWords = document.getElementById('remaining-words');
        const progress = document.getElementById('progress');
        const progressText = document.getElementById('progress-text');
        const timer = document.getElementById('timer');
        const group1Btn = document.getElementById('group1-btn');
        const group2Btn = document.getElementById('group2-btn');
        const group3Btn = document.getElementById('group3-btn');

        // åº”ç”¨çŠ¶æ€
        let currentWordIndex = -1;
        let currentGroup = 1;
        let unmasteredWords = [];
        let startTime = null;
        let timerInterval = null;
        let groupTimes = [0, 0, 0]; // å­˜å‚¨ä¸‰ç»„çš„å­¦ä¹ æ—¶é—´ï¼ˆç§’ï¼‰
        let currentGroupStartTime = null;

        // åˆå§‹åŒ–åº”ç”¨
        function initApp() {
            // åˆå§‹åŒ–ç»Ÿè®¡æ•°æ®
            updateStats();
            
            // è®¾ç½®ç¬¬ä¸€ç»„å•è¯
            setGroup(1);
            
            // å¼€å§‹è®¡æ—¶
            startTimer();
            
            // ç»‘å®šäº‹ä»¶
            flashcard.addEventListener('click', flipCard);
            btnKnow.addEventListener('click', handleKnow);
            btnDontKnow.addEventListener('click', handleDontKnow);
            ttsFront.addEventListener('click', speakWord);
            ttsBack.addEventListener('click', speakWord);
            group1Btn.addEventListener('click', () => setGroup(1));
            group2Btn.addEventListener('click', () => setGroup(2));
            group3Btn.addEventListener('click', () => setGroup(3));
        }

        // è®¾ç½®å½“å‰å­¦ä¹ ç»„
        function setGroup(groupNum) {
            // å¦‚æœå°è¯•åˆ‡æ¢åˆ°æœªè§£é”çš„ç»„ï¼Œç›´æ¥è¿”å›
            if (groupNum > 1 && !isGroupUnlocked(groupNum)) {
                return;
            }
            
            // ä¿å­˜å½“å‰ç»„çš„å­¦ä¹ æ—¶é—´
            if (currentGroupStartTime) {
                groupTimes[currentGroup-1] += Math.floor((Date.now() - currentGroupStartTime) / 1000);
            }
            
            currentGroup = groupNum;
            currentGroupStartTime = Date.now();
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            updateGroupButtons();
            
            // è·å–å½“å‰ç»„çš„å•è¯
            const startIndex = (groupNum - 1) * 20;
            const endIndex = startIndex + 20;
            const groupWords = wordData.slice(startIndex, endIndex);
            
            // è·å–æœªæŒæ¡çš„å•è¯
            unmasteredWords = groupWords.filter(word => word.status === 'unmastered');
            
            // æ˜¾ç¤ºç¬¬ä¸€ä¸ªå•è¯
            showNextWord();
            
            // æ›´æ–°ç»Ÿè®¡æ•°æ®
            updateStats();
        }

        // æ£€æŸ¥ç»„æ˜¯å¦å·²è§£é”
        function isGroupUnlocked(groupNum) {
            if (groupNum === 1) return true;
            
            const prevGroupStart = (groupNum - 2) * 20;
            const prevGroupEnd = prevGroupStart + 20;
            const prevGroupWords = wordData.slice(prevGroupStart, prevGroupEnd);
            
            return prevGroupWords.every(word => word.status === 'mastered');
        }

        // æ›´æ–°ç»„æŒ‰é’®çŠ¶æ€
        function updateGroupButtons() {
            group1Btn.classList.toggle('active', currentGroup === 1);
            group2Btn.classList.toggle('active', currentGroup === 2);
            group3Btn.classList.toggle('active', currentGroup === 3);
            
            group2Btn.classList.toggle('locked', !isGroupUnlocked(2));
            group3Btn.classList.toggle('locked', !isGroupUnlocked(3));
        }

        // æ›´æ–°ç»Ÿè®¡æ•°æ®
        function updateStats() {
            const total = 20; // æ¯ç»„20ä¸ªå•è¯
            const startIndex = (currentGroup - 1) * 20;
            const endIndex = startIndex + 20;
            const groupWords = wordData.slice(startIndex, endIndex);
            
            const mastered = groupWords.filter(word => word.status === 'mastered').length;
            const remaining = total - mastered;
            
            totalWords.textContent = total;
            masteredWords.textContent = mastered;
            remainingWords.textContent = remaining;
            
            // æ›´æ–°è¿›åº¦æ¡
            const progressPercentage = (mastered / total) * 100;
            progress.style.width = `${progressPercentage}%`;
            progressText.textContent = `${mastered}/${total} (${Math.round(progressPercentage)}%)`;
            
            // æ£€æŸ¥å½“å‰ç»„æ˜¯å¦å®Œæˆ
            if (remaining === 0) {
                // å¦‚æœæ‰€æœ‰ç»„éƒ½å®Œæˆäº†
                if (currentGroup === 3 && isGroupUnlocked(3)) {
                    showCompletionModal();
                } else if (currentGroup < 3) {
                    // è‡ªåŠ¨è§£é”ä¸‹ä¸€ç»„
                    setTimeout(() => {
                        setGroup(currentGroup + 1);
                    }, 1000);
                }
            }
        }

        // æ˜¾ç¤ºä¸‹ä¸€ä¸ªå•è¯
        function showNextWord() {
            // å¦‚æœæ²¡æœ‰æœªæŒæ¡çš„å•è¯ï¼Œæ˜¾ç¤ºå®Œæˆæ¶ˆæ¯
            if (unmasteredWords.length === 0) {
                wordFront.textContent = "æ­å–œï¼";
                wordBack.textContent = "æ­å–œï¼";
                translation.textContent = "æ‚¨å·²å®Œæˆæœ¬ç»„æ‰€æœ‰å•è¯çš„å­¦ä¹ ";
                memoryAid.textContent = "ç»§ç»­ä¿æŒå¤ä¹ ä»¥å·©å›ºè®°å¿†";
                repeatCount.textContent = "";
                return;
            }
            
            // éšæœºé€‰æ‹©ä¸€ä¸ªæœªæŒæ¡çš„å•è¯
            currentWordIndex = Math.floor(Math.random() * unmasteredWords.length);
            const currentWord = unmasteredWords[currentWordIndex];
            
            // æ›´æ–°å¡ç‰‡å†…å®¹
            wordFront.textContent = currentWord.english;
            wordBack.textContent = currentWord.english;
            translation.textContent = currentWord.chinese;
            memoryAid.textContent = currentWord.memoryAid || "";
            repeatCount.textContent = currentWord.repeatCount > 0 ? currentWord.repeatCount : "";
            
            // ç¡®ä¿å¡ç‰‡æ˜¾ç¤ºæ­£é¢
            flashcard.classList.remove('flipped');
            
            // è‡ªåŠ¨æ’­æ”¾å•è¯å‘éŸ³
            setTimeout(speakWord, 300);
        }

        // ç¿»è½¬å¡ç‰‡
        function flipCard() {
            flashcard.classList.toggle('flipped');
        }

        // å¤„ç†"ä¼šäº†"æŒ‰é’®ç‚¹å‡»
        function handleKnow() {
            if (currentWordIndex === -1 || unmasteredWords.length === 0) return;
            
            const currentWord = unmasteredWords[currentWordIndex];
            
            // æ›´æ–°å•è¯çŠ¶æ€
            currentWord.status = 'mastered';
            currentWord.repeatCount = 0;
            
            // ä»æœªæŒæ¡åˆ—è¡¨ä¸­ç§»é™¤
            unmasteredWords.splice(currentWordIndex, 1);
            
            // ç¿»è½¬å¡ç‰‡å›æ­£é¢
            flashcard.classList.remove('flipped');
            
            // å»¶è¿Ÿæ˜¾ç¤ºä¸‹ä¸€ä¸ªå•è¯ï¼Œç­‰å¾…åŠ¨ç”»å®Œæˆ
            setTimeout(() => {
                updateStats();
                showNextWord();
            }, 600);
        }

        // å¤„ç†"ä¸ä¼š"æŒ‰é’®ç‚¹å‡»
        function handleDontKnow() {
            if (currentWordIndex === -1 || unmasteredWords.length === 0) return;
            
            const currentWord = unmasteredWords[currentWordIndex];
            
            // å¢åŠ é‡å¤è®¡æ•°
            currentWord.repeatCount += 1;
            
            // ç¿»è½¬å¡ç‰‡å›æ­£é¢
            flashcard.classList.remove('flipped');
            
            // å»¶è¿Ÿæ˜¾ç¤ºä¸‹ä¸€ä¸ªå•è¯ï¼Œç­‰å¾…åŠ¨ç”»å®Œæˆ
            setTimeout(() => {
                updateStats();
                showNextWord();
            }, 600);
        }

        // æœ—è¯»å•è¯
        function speakWord(event) {
            if (event) {
                event.stopPropagation();
            }
            
            const currentWord = unmasteredWords[currentWordIndex];
            if (!currentWord) return;
            
            const utterance = new SpeechSynthesisUtterance(currentWord.english);
            utterance.lang = 'en-US';
            utterance.rate = 0.8;
            speechSynthesis.speak(utterance);
        }

        // å¼€å§‹è®¡æ—¶å™¨
        function startTimer() {
            startTime = Date.now();
            timerInterval = setInterval(updateTimer, 1000);
        }

        // æ›´æ–°è®¡æ—¶å™¨æ˜¾ç¤º
        function updateTimer() {
            if (!currentGroupStartTime) return;
            
            const currentTime = Date.now();
            const elapsedSeconds = Math.floor((currentTime - currentGroupStartTime) / 1000);
            
            const minutes = Math.floor(elapsedSeconds / 60);
            const seconds = elapsedSeconds % 60;
            
            timer.textContent = `ç”¨æ—¶: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // æ˜¾ç¤ºå®Œæˆæ¨¡æ€æ¡†
        function showCompletionModal() {
            // åœæ­¢è®¡æ—¶å™¨
            clearInterval(timerInterval);
            
            // è®¡ç®—æ€»æ—¶é—´
            const totalTime = groupTimes.reduce((sum, time) => sum + time, 0);
            
            // æŒ‰é‡å¤æ¬¡æ•°æ’åºå•è¯
            const sortedWords = [...wordData].sort((a, b) => b.repeatCount - a.repeatCount);
            
            // åˆ›å»ºæ¨¡æ€æ¡†
            const modal = document.createElement('div');
            modal.className = 'completion-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <h2 class="modal-title">æ­å–œå®Œæˆç¬¬å››è¯¾æ‰€æœ‰å•è¯å­¦ä¹ ï¼</h2>
                    <div class="time-stats">
                        <h3>å„ç»„å­¦ä¹ ç”¨æ—¶</h3>
                        <div class="time-stat">
                            <span>ç¬¬ä¸€ç»„ (1-20):</span>
                            <span>${formatTime(groupTimes[0])}</span>
                        </div>
                        <div class="time-stat">
                            <span>ç¬¬äºŒç»„ (21-40):</span>
                            <span>${formatTime(groupTimes[1])}</span>
                        </div>
                        <div class="time-stat">
                            <span>ç¬¬ä¸‰ç»„ (41-60):</span>
                            <span>${formatTime(groupTimes[2])}</span>
                        </div>
                        <div class="time-stat" style="font-weight: bold; background: #e8f4fd;">
                            <span>æ€»è®¡:</span>
                            <span>${formatTime(totalTime)}</span>
                        </div>
                    </div>
                    <h3>å•è¯å¤ä¹ æ¬¡æ•°æ’å</h3>
                    <div class="word-list">
                        ${sortedWords.map((word, index) => `
                            <div class="word-item">
                                <span>${index + 1}. ${word.english} - ${word.chinese}</span>
                                <span>å¤ä¹ æ¬¡æ•°: ${word.repeatCount}</span>
                            </div>
                        `).join('')}
                    </div>
                    <button class="close-btn" id="close-modal">å…³é—­</button>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // ç»‘å®šå…³é—­æŒ‰é’®äº‹ä»¶
            document.getElementById('close-modal').addEventListener('click', () => {
                document.body.removeChild(modal);
            });
        }

        // æ ¼å¼åŒ–æ—¶é—´æ˜¾ç¤º
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            return `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
        }

        // åˆå§‹åŒ–åº”ç”¨
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>